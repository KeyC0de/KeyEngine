\doxysection{shadow\+\_\+pass.\+h}
\hypertarget{shadow__pass_8h_source}{}\label{shadow__pass_8h_source}\index{inc/shadow\_pass.h@{inc/shadow\_pass.h}}
\mbox{\hyperlink{shadow__pass_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <DirectXMath.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{render__queue__pass_8h}{render\_queue\_pass.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{constant__buffer_8h}{constant\_buffer.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{light__source_8h}{light\_source.h}}"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classGraphics}{Graphics}};}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classCamera}{Camera}};}
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTextureArrayOffscreenDS}{TextureArrayOffscreenDS}};}
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classCubeTextureArrayOffscreenDS}{CubeTextureArrayOffscreenDS}};}
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIDepthStencilView}{IDepthStencilView}};}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceren}{ren}}}
\DoxyCodeLine{00019\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classren_1_1ShadowPass}{ShadowPass}}}
\DoxyCodeLine{00028\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classren_1_1RenderQueuePass}{RenderQueuePass}}}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_a78befc9467180544b3e1b7ea9c6db0c1_a78befc9467180544b3e1b7ea9c6db0c1}{s\_maxShadowCastingLights}}\ =\ 16u;}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_a0a9da504ea83b9478583b9fc996a56be_a0a9da504ea83b9478583b9fc996a56be}{s\_globalsVscbSlot}}\ =\ 1u;}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_a0f684ab6eadd250671eeff37319d7ac1_a0f684ab6eadd250671eeff37319d7ac1}{s\_globalsPscbSlot}}\ =\ 1u;}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_ab2d17ab137ff24dfd2e7f219b1da5bfd_ab2d17ab137ff24dfd2e7f219b1da5bfd}{s\_lightArrayVertexShaderCBSlot}}\ =\ 2u;}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_aabd9a71155ac410aa5a12a732b48a762_aabd9a71155ac410aa5a12a732b48a762}{s\_lightArrayPixelShaderCBSlot}}\ =\ 2u;}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_affb066b0b62365f2371369da5e7b164f_affb066b0b62365f2371369da5e7b164f}{s\_shadowMapArraySlot}}\ =\ 3u;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_a57668a13b79c7b97a93535fc9f328e0e_a57668a13b79c7b97a93535fc9f328e0e}{s\_shadowCubeMapArraySlot}}\ =\ 4u;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_a7f7b6d1fa45f819dd55562fc55886bdc_a7f7b6d1fa45f819dd55562fc55886bdc}{s\_shadowMapResolution}}\ =\ 1024u;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsVSCB}{GlobalsVSCB}}}
\DoxyCodeLine{00040\ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsVSCB_abbbd44b74bb776816ea9e30ca979084e_abbbd44b74bb776816ea9e30ca979084e}{cb\_time}};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsVSCB_a15f0aedc26e3c7b632a5bfbe02912bab_a15f0aedc26e3c7b632a5bfbe02912bab}{cb\_nLights}};}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsVSCB_adf54f23af297b4d0e4101e5e807d6377_adf54f23af297b4d0e4101e5e807d6377}{cb\_nPointLights}};}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsVSCB_a0e2b427111b40b20aae2b1fdb52c8593_a0e2b427111b40b20aae2b1fdb52c8593}{cb\_globalsPadding}};}
\DoxyCodeLine{00045\ \ \ \ \ \};}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer<GlobalsVSCB>}}\ \mbox{\hyperlink{classren_1_1ShadowPass_a0c0dd1bd05256ed899612d08eea83e25_a0c0dd1bd05256ed899612d08eea83e25}{m\_globalsVscb}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsPSCB}{GlobalsPSCB}}}
\DoxyCodeLine{00049\ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsPSCB_adb7855033f5756368a7f043889998af8_adb7855033f5756368a7f043889998af8}{cb\_time}};}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsPSCB_ac4eb5064194e0726eb4273998c3da59f_ac4eb5064194e0726eb4273998c3da59f}{cb\_nLights}};}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsPSCB_afe8db2dd5dd176d7496ee6232d4a771b_afe8db2dd5dd176d7496ee6232d4a771b}{cb\_nPointLights}};}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{structren_1_1ShadowPass_1_1GlobalsPSCB_a2d10e7dbc77b799328a7dfa4876bd33b_a2d10e7dbc77b799328a7dfa4876bd33b}{cb\_globalsPadding}};}
\DoxyCodeLine{00054\ \ \ \ \ \};}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer<GlobalsPSCB>}}\ \mbox{\hyperlink{classren_1_1ShadowPass_a5166c73b0a29b04d5e50dfd998c48628_a5166c73b0a29b04d5e50dfd998c48628}{m\_globalsPscb}};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classren_1_1ShadowPass_a09354ae41187122545fb29cf0d7794fd_a09354ae41187122545fb29cf0d7794fd}{LightsVSCB}}\ =\ \mbox{\hyperlink{structILightSource_1_1LightVSCB}{ILightSource::LightVSCB}}[\mbox{\hyperlink{classren_1_1ShadowPass_a78befc9467180544b3e1b7ea9c6db0c1_a78befc9467180544b3e1b7ea9c6db0c1}{s\_maxShadowCastingLights}}];}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer<LightsVSCB>}}\ \mbox{\hyperlink{classren_1_1ShadowPass_aed4d50a7bfde597dc4247ce3ecaa6ada_aed4d50a7bfde597dc4247ce3ecaa6ada}{m\_vscb}};}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classren_1_1ShadowPass_afd94955d277d6d9df9571863056cbe55_afd94955d277d6d9df9571863056cbe55}{LightsPSCB}}\ =\ \mbox{\hyperlink{structILightSource_1_1LightPSCB}{ILightSource::LightPSCB}}[\mbox{\hyperlink{classren_1_1ShadowPass_a78befc9467180544b3e1b7ea9c6db0c1_a78befc9467180544b3e1b7ea9c6db0c1}{s\_maxShadowCastingLights}}];}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer<LightsPSCB>}}\ \mbox{\hyperlink{classren_1_1ShadowPass_adccb30c5bb3a2e7ade417c7157b83ca4_adccb30c5bb3a2e7ade417c7157b83ca4}{m\_pscb}};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ std::vector<DirectX::XMVECTOR>\ \mbox{\hyperlink{classren_1_1ShadowPass_a9352a3d27813950414fbed5a9ea476c7_a9352a3d27813950414fbed5a9ea476c7}{m\_cameraDirections}}\{6\};}
\DoxyCodeLine{00063\ \ \ \ \ std::vector<DirectX::XMVECTOR>\ \mbox{\hyperlink{classren_1_1ShadowPass_a892a877625b3f74424b05cfe66c84603_a892a877625b3f74424b05cfe66c84603}{m\_cameraUps}}\{6\};}
\DoxyCodeLine{00064\ \ \ \ \ std::vector<ILightSource*>\ \mbox{\hyperlink{classren_1_1ShadowPass_ad8703170561e0605426d5e43ecc96324_ad8703170561e0605426d5e43ecc96324}{m\_shadowCastingLights}};}
\DoxyCodeLine{00065\ \ \ \ \ std::shared\_ptr<TextureArrayOffscreenDS>\ \mbox{\hyperlink{classren_1_1ShadowPass_af4f3a07a55a116c015e4d5cf7b704343_af4f3a07a55a116c015e4d5cf7b704343}{m\_pOffscreenDsvMapArray}};\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ shadow\ maps\ for\ Directional/Spot\ lights}}
\DoxyCodeLine{00066\ \ \ \ \ std::shared\_ptr<CubeTextureArrayOffscreenDS>\ \mbox{\hyperlink{classren_1_1ShadowPass_a385c01dc0ae5345d932f14e54846a515_a385c01dc0ae5345d932f14e54846a515}{m\_pOffscreenDsvCubemapArray}};\ \ \ \ \textcolor{comment}{//\ shadow\ cube\ maps\ for\ Point\ lights}}
\DoxyCodeLine{00067\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classren_1_1ShadowPass_abe2e960e1ee7226dc547ac67616aecc1_abe2e960e1ee7226dc547ac67616aecc1}{getResolution}}()\ noexcept;}
\DoxyCodeLine{00069\ public:}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classren_1_1ShadowPass}{ShadowPass}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,\ const\ std::\textcolor{keywordtype}{string}\ \&name,\ const\ \textcolor{keywordtype}{unsigned}\ shadowMapRez\ =\ \mbox{\hyperlink{classren_1_1ShadowPass_a7f7b6d1fa45f819dd55562fc55886bdc_a7f7b6d1fa45f819dd55562fc55886bdc}{s\_shadowMapResolution}}\ );}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ then\ render\ the\ depth\ buffer\ to\ texture\ 6\ times}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_a31a85426ffac3f700c0b3c187b0567af_a31a85426ffac3f700c0b3c187b0567af}{run}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx\ )\ const\ cond\_noex\ override;}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_a90d4ac05ba7d7f2cb3ae06ce0ffae448_a90d4ac05ba7d7f2cb3ae06ce0ffae448}{bindShadowCastingLights}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,\ const\ std::vector<\mbox{\hyperlink{classILightSource}{ILightSource}}*>\ \&shadowCastingLights\ );}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_abfd441eaa17f14d2f82fea433806a4f4_abfd441eaa17f14d2f82fea433806a4f4}{dumpShadowMap}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,\ const\ std::\textcolor{keywordtype}{string}\ \&path\ )\ const;}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_a88f8d3b07f57c1d6a98a78fec2e68b5f_a88f8d3b07f57c1d6a98a78fec2e68b5f}{dumpShadowCubeMap}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,\ const\ std::\textcolor{keywordtype}{string}\ \&path\ )\ const;}
\DoxyCodeLine{00080\ private:}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_a2dcba5ef918addeb7a105cce0fe45fe0_a2dcba5ef918addeb7a105cce0fe45fe0}{bindGlobalCBs}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx\ )\ cond\_noex;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classren_1_1ShadowPass_a3dfc4bceb738b9e479457502373f6b38_a3dfc4bceb738b9e479457502373f6b38}{bindLightCBs}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx\ )\ cond\_noex;}
\DoxyCodeLine{00083\ \};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \}\textcolor{comment}{//namespace\ ren}}

\end{DoxyCode}
