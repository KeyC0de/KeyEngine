\doxysection{constant\+\_\+buffer.\+h}
\hypertarget{constant__buffer_8h_source}{}\label{constant__buffer_8h_source}\index{inc/constant\_buffer.h@{inc/constant\_buffer.h}}
\mbox{\hyperlink{constant__buffer_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphics_8h}{graphics.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bindable_8h}{bindable.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bindable__registry_8h}{bindable\_registry.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{os__utils_8h}{os\_utils.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assertions__console_8h}{assertions\_console.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dxgi__info__queue_8h}{dxgi\_info\_queue.h}}"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ CB>}
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}}
\DoxyCodeLine{00019\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classIBindable}{IBindable}}}
\DoxyCodeLine{00020\ \{}
\DoxyCodeLine{00021\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00022\ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11Buffer>\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}};}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classGraphics}{Graphics}}\ *\mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{s\_gph}};}
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_aaf8166466c78ea1d4a6895a311f1b35c_aaf8166466c78ea1d4a6895a311f1b35c}{IConstantBuffer}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}}(slot)}
\DoxyCodeLine{00031\ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{s\_gph}}\ =\ \&gfx;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ cbDesc\{\};}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{setBufferDesc}}(\ cbDesc\ );}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ HRESULT\ hres\ =\ \mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{getDevice}}(\ gfx\ )-\/>CreateBuffer(\ \&cbDesc,\ \textcolor{keyword}{nullptr},\ \&\mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}\ );}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os__utils_8h_a7027472bc9b182c0fea900713e4541e3_a7027472bc9b182c0fea900713e4541e3}{ASSERT\_HRES\_IF\_FAILED}};}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a2d580772f74b4ea190687b3f0284607e_a2d580772f74b4ea190687b3f0284607e}{IConstantBuffer}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CB\ \&cb,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}}(slot)}
\DoxyCodeLine{00047\ \ \ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{s\_gph}}\ =\ \&gfx;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{//ASSERT(\ util::isAligned(\ \&cb,\ 16\ ),\ "{}Constant\ Buffer\ not\ 16B\ aligned!"{}\ );}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ cbDesc\{\};}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{setBufferDesc}}(\ cbDesc\ );}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ D3D11\_SUBRESOURCE\_DATA\ SubRscData\{\};}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ SubRscData.pSysMem\ =\ \&cb;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ HRESULT\ hres\ =\ \mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{getDevice}}(\ gfx\ )-\/>CreateBuffer(\ \&cbDesc,\ \&SubRscData,\ \&\mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}\ );}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os__utils_8h_a7027472bc9b182c0fea900713e4541e3_a7027472bc9b182c0fea900713e4541e3}{ASSERT\_HRES\_IF\_FAILED}};}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a6205d2c03344895735375508cc215983_a6205d2c03344895735375508cc215983}{IConstantBuffer}}(\ Microsoft::WRL::ComPtr<ID3D11Buffer>\ \&d3dBuf,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}\{d3dBuf\},}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}}(slot)}
\DoxyCodeLine{00066\ \ \ \ \ \{}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIConstantBuffer_a01fb34eedba302e40cc4a4ad9889bcf3_a01fb34eedba302e40cc4a4ad9889bcf3}{update}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CB\ \&cb\ )}
\DoxyCodeLine{00073\ \ \ \ \ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ D3D11\_MAPPED\_SUBRESOURCE\ msr\{\};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ HRESULT\ hres\ =\ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ gfx\ )-\/>Map(\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}.Get(),\ 0u,\ D3D11\_MAP::D3D11\_MAP\_WRITE\_DISCARD,\ 0u,\ \&msr\ );}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os__utils_8h_a7027472bc9b182c0fea900713e4541e3_a7027472bc9b182c0fea900713e4541e3}{ASSERT\_HRES\_IF\_FAILED}};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dxgi__info__queue_8h_accf41747d77929c5a185f1f7d5c72263_accf41747d77929c5a185f1f7d5c72263}{DXGI\_GET\_QUEUE\_INFO}}(\ gfx\ );}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ memcpy(\ msr.pData,\ \&cb,\ \textcolor{keyword}{sizeof}\ CB\ );}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ gfx\ )-\/>Unmap(\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}.Get(),\ 0u\ );}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ ID3D11Buffer*\ \mbox{\hyperlink{classIConstantBuffer_a234c7460e626f1659945d4aace6783af_a234c7460e626f1659945d4aace6783af}{getCb}}()\ const\ noexcept}
\DoxyCodeLine{00085\ \ \ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}.Get();}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{classIConstantBuffer_a01dc2ed3fe56e398466da0eac8476086_a01dc2ed3fe56e398466da0eac8476086}{getSlot}}()\ const\ noexcept}
\DoxyCodeLine{00090\ \ \ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}};}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{setBufferDesc}}(\ D3D11\_BUFFER\_DESC\ \&d3dBufDesc\ )}
\DoxyCodeLine{00096\ \ \ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ d3dBufDesc.BindFlags\ =\ D3D11\_BIND\_CONSTANT\_BUFFER;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ d3dBufDesc.Usage\ =\ D3D11\_USAGE\_DYNAMIC;}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ d3dBufDesc.CPUAccessFlags\ =\ D3D11\_CPU\_ACCESS\_WRITE;}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ d3dBufDesc.ByteWidth\ =\ \textcolor{keyword}{sizeof}\ CB;}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ d3dBufDesc.MiscFlags\ =\ 0;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ d3dBufDesc.StructureByteStride\ =\ 0;}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ \};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ CB>}
\DoxyCodeLine{00107\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer}}\ final}
\DoxyCodeLine{00108\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>}
\DoxyCodeLine{00109\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{::s\_gph}};}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{::m\_pD3dCb}};}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{::m\_slot}};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{IBindable::getDevice}};}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{IBindable::getDeviceContext}};}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{::setBufferDesc}};}
\DoxyCodeLine{00117\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_aaf8166466c78ea1d4a6895a311f1b35c_aaf8166466c78ea1d4a6895a311f1b35c}{::IConstantBuffer}};\ \textcolor{comment}{//\ inheriting\ constructors}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a234c7460e626f1659945d4aace6783af_a234c7460e626f1659945d4aace6783af}{::getCb}};}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a01dc2ed3fe56e398466da0eac8476086_a01dc2ed3fe56e398466da0eac8476086}{::getSlot}};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classVertexShaderConstantBuffer_a8fd934cdf536ab8de284fb5ce1850a20_a8fd934cdf536ab8de284fb5ce1850a20}{bind}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx\ )\ cond\_noex\ \textcolor{keyword}{override}}
\DoxyCodeLine{00123\ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ gfx\ )-\/>VSSetConstantBuffers(\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}},\ 1u,\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}.GetAddressOf()\ );}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dxgi__info__queue_8h_accf41747d77929c5a185f1f7d5c72263_accf41747d77929c5a185f1f7d5c72263}{DXGI\_GET\_QUEUE\_INFO}}(\ gfx\ );}
\DoxyCodeLine{00126\ \ \ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<VertexShaderConstantBuffer>\ \mbox{\hyperlink{classVertexShaderConstantBuffer_af6a9b7538d1904ff2bf05aa1b4ec7cbd_af6a9b7538d1904ff2bf05aa1b4ec7cbd}{fetch}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CB\ \&cb,}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00131\ \ \ \ \ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classBindableRegistry_a034568929d2dbcda2bf619e90d9fc68e_a034568929d2dbcda2bf619e90d9fc68e}{BindableRegistry::fetch<VertexShaderConstantBuffer>}}(\ gfx,\ cb,\ slot\ );}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<VertexShaderConstantBuffer>\ \mbox{\hyperlink{classVertexShaderConstantBuffer_a065880d910fae01cf5cd996379b2a846_a065880d910fae01cf5cd996379b2a846}{fetch}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00137\ \ \ \ \ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classBindableRegistry_a034568929d2dbcda2bf619e90d9fc68e_a034568929d2dbcda2bf619e90d9fc68e}{BindableRegistry::fetch<VertexShaderConstantBuffer>}}(\ gfx,\ slot\ );}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classVertexShaderConstantBuffer_ab479a1329c5a7fd39075582f2d89262a_ab479a1329c5a7fd39075582f2d89262a}{calcUid}}(\ \textcolor{keyword}{const}\ CB\ \&cb,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00143\ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVertexShaderConstantBuffer_ab479a1329c5a7fd39075582f2d89262a_ab479a1329c5a7fd39075582f2d89262a}{calcUid}}(\ slot\ );}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classVertexShaderConstantBuffer_aceeaed4fc258eabd881987d05d598385_aceeaed4fc258eabd881987d05d598385}{calcUid}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00148\ \ \ \ \ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }std::string\_literals;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{typeid}(\ \mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer}}\ ).name()\ +\ \textcolor{stringliteral}{"{}\#"{}}s\ +\ std::to\_string(\ slot\ );}
\DoxyCodeLine{00151\ \ \ \ \ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ std::string\ \mbox{\hyperlink{classVertexShaderConstantBuffer_a0ce115989b6228614b3cfe00cdc14140_a0ce115989b6228614b3cfe00cdc14140}{getUid}}()\ const\ noexcept\textcolor{keyword}{\ override}}
\DoxyCodeLine{00154\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVertexShaderConstantBuffer_ab479a1329c5a7fd39075582f2d89262a_ab479a1329c5a7fd39075582f2d89262a}{calcUid}}(\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}}\ );}
\DoxyCodeLine{00156\ \ \ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer<CB>}}\ \mbox{\hyperlink{classVertexShaderConstantBuffer_a1ea067e61588936bf6140ad036683f6b_a1ea067e61588936bf6140ad036683f6b}{makeCopy}}(\ ID3D11Buffer\ *srcBuf,}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00160\ \ \ \ \ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11Buffer>\ destBuf;}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ cbDesc\{\};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{setBufferDesc}}(\ cbDesc\ );}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ HRESULT\ hres\ =\ \mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{getDevice}}(\ *s\_gph\ )-\/>CreateBuffer(\ \&cbDesc,\ \textcolor{keyword}{nullptr},\ \&destBuf\ );}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os__utils_8h_a7027472bc9b182c0fea900713e4541e3_a7027472bc9b182c0fea900713e4541e3}{ASSERT\_HRES\_IF\_FAILED}};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ *s\_gph\ )-\/>CopyResource(\ destBuf.Get(),\ srcBuf\ );}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dxgi__info__queue_8h_a2e9e35ee25f5be4f5b41b48b9d9b8b23_a2e9e35ee25f5be4f5b41b48b9d9b8b23}{DXGI\_GET\_QUEUE\_INFO\_P}}(\ \mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{s\_gph}}\ );}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVertexShaderConstantBuffer}{VertexShaderConstantBuffer<CB>}}(\ destBuf,\ slot\ );}
\DoxyCodeLine{00173\ \ \ \ \ \}}
\DoxyCodeLine{00174\ \};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ CB>}
\DoxyCodeLine{00177\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer}}\ final}
\DoxyCodeLine{00178\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>}
\DoxyCodeLine{00179\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{::s\_gph}};}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{::m\_pD3dCb}};}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{::m\_slot}};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{IBindable::getDevice}};}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{IBindable::getDeviceContext}};}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{::setBufferDesc}};}
\DoxyCodeLine{00187\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_aaf8166466c78ea1d4a6895a311f1b35c_aaf8166466c78ea1d4a6895a311f1b35c}{::IConstantBuffer}};\ \textcolor{comment}{//\ inheriting\ constructors}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a234c7460e626f1659945d4aace6783af_a234c7460e626f1659945d4aace6783af}{::getCb}};}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classIConstantBuffer}{IConstantBuffer}}<CB>\mbox{\hyperlink{classIConstantBuffer_a01dc2ed3fe56e398466da0eac8476086_a01dc2ed3fe56e398466da0eac8476086}{::getSlot}};}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPixelShaderConstantBuffer_ae2388f80f75a3a53b53c92d906b992d0_ae2388f80f75a3a53b53c92d906b992d0}{bind}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx\ )\ cond\_noex\ \textcolor{keyword}{override}}
\DoxyCodeLine{00193\ \ \ \ \ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ gfx\ )-\/>PSSetConstantBuffers(\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}},\ 1u,\ \mbox{\hyperlink{classIConstantBuffer_af9cbf846b484e990f92dcbf2f8c36ad0_af9cbf846b484e990f92dcbf2f8c36ad0}{m\_pD3dCb}}.GetAddressOf()\ );}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dxgi__info__queue_8h_accf41747d77929c5a185f1f7d5c72263_accf41747d77929c5a185f1f7d5c72263}{DXGI\_GET\_QUEUE\_INFO}}(\ gfx\ );}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<PixelShaderConstantBuffer>\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a21c55aef0616ba6a0650afe1bcc7c281_a21c55aef0616ba6a0650afe1bcc7c281}{fetch}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CB\ \&cb,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00201\ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classBindableRegistry_a034568929d2dbcda2bf619e90d9fc68e_a034568929d2dbcda2bf619e90d9fc68e}{BindableRegistry::fetch<PixelShaderConstantBuffer>}}(\ gfx,\ cb,\ slot\ );}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<PixelShaderConstantBuffer>\ \mbox{\hyperlink{classPixelShaderConstantBuffer_adfd449e0f9d04cb957a9bf81b665b49a_adfd449e0f9d04cb957a9bf81b665b49a}{fetch}}(\ \mbox{\hyperlink{classGraphics}{Graphics}}\ \&gfx,}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00207\ \ \ \ \ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classBindableRegistry_a034568929d2dbcda2bf619e90d9fc68e_a034568929d2dbcda2bf619e90d9fc68e}{BindableRegistry::fetch<PixelShaderConstantBuffer>}}(\ gfx,\ slot\ );}
\DoxyCodeLine{00209\ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a06e74317c26b771307d8af0da37b363f_a06e74317c26b771307d8af0da37b363f}{calcUid}}(\ \textcolor{keyword}{const}\ CB\ \&cb,}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00213\ \ \ \ \ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a06e74317c26b771307d8af0da37b363f_a06e74317c26b771307d8af0da37b363f}{calcUid}}(\ slot\ );}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a7921ee3616da98e372c145b6303fca7d_a7921ee3616da98e372c145b6303fca7d}{calcUid}}(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00218\ \ \ \ \ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ namespace\ }std::string\_literals;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{typeid}(\ \mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer}}\ ).name()\ +\ \textcolor{stringliteral}{"{}\#"{}}s\ +\ std::to\_string(\ slot\ );}
\DoxyCodeLine{00221\ \ \ \ \ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ std::string\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a9de5d16e68493d7600bcf6bb683f4cbc_a9de5d16e68493d7600bcf6bb683f4cbc}{getUid}}()\ const\ noexcept\textcolor{keyword}{\ override}}
\DoxyCodeLine{00224\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a06e74317c26b771307d8af0da37b363f_a06e74317c26b771307d8af0da37b363f}{calcUid}}(\ \mbox{\hyperlink{classIConstantBuffer_a82ee09da1156dbb8d18d6fe580af6448_a82ee09da1156dbb8d18d6fe580af6448}{m\_slot}}\ );}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer<CB>}}\ \mbox{\hyperlink{classPixelShaderConstantBuffer_a1df01eba25d87e22ad771c2ade2ff6c5_a1df01eba25d87e22ad771c2ade2ff6c5}{makeCopy}}(\ ID3D11Buffer\ *srcBuf,}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ slot\ )}
\DoxyCodeLine{00230\ \ \ \ \ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ Microsoft::WRL::ComPtr<ID3D11Buffer>\ destBuf;}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ cbDesc\{\};}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIConstantBuffer_a6ad5e0bb4786aa200f8f99d91b1e8f60_a6ad5e0bb4786aa200f8f99d91b1e8f60}{setBufferDesc}}(\ cbDesc\ );}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ HRESULT\ hres\ =\ \mbox{\hyperlink{classGraphicsFriend_a175df79f82ab5a6dad1df24b5a242ef7_a175df79f82ab5a6dad1df24b5a242ef7}{getDevice}}(\ *s\_gph\ )-\/>CreateBuffer(\ \&cbDesc,\ \textcolor{keyword}{nullptr},\ \&destBuf\ );}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{os__utils_8h_a7027472bc9b182c0fea900713e4541e3_a7027472bc9b182c0fea900713e4541e3}{ASSERT\_HRES\_IF\_FAILED}};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsFriend_a619e32893ab49ea6c5200e7c2d52e2f2_a619e32893ab49ea6c5200e7c2d52e2f2}{getDeviceContext}}(\ *s\_gph\ )-\/>CopyResource(\ destBuf.Get(),\ srcBuf\ );}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dxgi__info__queue_8h_a2e9e35ee25f5be4f5b41b48b9d9b8b23_a2e9e35ee25f5be4f5b41b48b9d9b8b23}{DXGI\_GET\_QUEUE\_INFO\_P}}(\ \mbox{\hyperlink{classIConstantBuffer_a7de4ee448a807aa113186ff83757a425_a7de4ee448a807aa113186ff83757a425}{s\_gph}}\ );}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPixelShaderConstantBuffer}{PixelShaderConstantBuffer<CB>}}(\ destBuf,\ slot\ );}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ \};}

\end{DoxyCode}
