\doxysection{reporter\+\_\+listener.\+h}
\hypertarget{reporter__listener_8h_source}{}\label{reporter__listener_8h_source}\index{inc/reporter\_listener.h@{inc/reporter\_listener.h}}
\mbox{\hyperlink{reporter__listener_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{non__copyable_8h}{non\_copyable.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assertions__console_8h}{assertions\_console.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classReporterAccess}{ReporterAccess}};}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIReporter}{IReporter}};}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIListener}{IListener}}}
\DoxyCodeLine{00070\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classNonCopyableAndNonMovable}{NonCopyableAndNonMovable}}}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIReporter}{IReporter}}<T>;}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{mutable}\ std::vector<const\ void*>\ \mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}};}
\DoxyCodeLine{00075\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classIListener_aae587719e1e793840bb501ba2f91d43c_aae587719e1e793840bb501ba2f91d43c}{\string~IListener}}()}
\DoxyCodeLine{00077\ \ \ \ \ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.begin();}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\ it\ !=\ \mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end()\ )}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classIReporter}{IReporter<T>}}\ *reporter\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classIReporter}{IReporter<T>}}*\textcolor{keyword}{>}(\ *it\ );}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ it\ =\ \mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.erase(\ it\ );}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ reporter-\/>\mbox{\hyperlink{classIReporter_a1e48a61d8ea294e895bc58d43516c700_a1e48a61d8ea294e895bc58d43516c700}{removeListener}}(\ \textcolor{keyword}{this}\ );\ \textcolor{comment}{//\ this\ removeListener\ call\ actually\ invalidates\ our\ iterator}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIListener_a75b1652418e98a4d0f6db2c61addae8d_a75b1652418e98a4d0f6db2c61addae8d}{notify}}(\ \textcolor{keyword}{const}\ T\&\ event\ )\ =\ 0;}
\DoxyCodeLine{00088\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIListener_a6b5c32b4da4ac2a5c5145bc573bb22a7_a6b5c32b4da4ac2a5c5145bc573bb22a7}{addReporter}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classIReporter}{IReporter<T>}}\ *reporter\ )}
\DoxyCodeLine{00090\ \ \ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ for\ repeated\ entries\ in\ IReporter::addListener\ instead\ of\ here}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.push\_back(\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ reporter\ )\ );}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ }
\DoxyCodeLine{00121\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classIReporter}{IReporter}}}
\DoxyCodeLine{00122\ \ \ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classNonCopyableAndNonMovable}{NonCopyableAndNonMovable}}}
\DoxyCodeLine{00123\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{mutable}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}};}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{mutable}\ std::vector<void*>\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}};\ \ \textcolor{comment}{//\ pointers\ to\ objects\ of\ type\ Listener<T>\ interested\ in\ being\ notified\ in\ events\ of\ type\ T}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{mutable}\ std::vector<void*>\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}};}
\DoxyCodeLine{00127\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{comment}{//\ force\ construction\ of\ reporters\ with\ an\ ReporterAccess\ to\ prevent\ objects\ without\ a\ permissions\ from\ using\ this\ system}}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classIReporter_ac46be9ddfe8366814c85b4b6e68e6f2e_ac46be9ddfe8366814c85b4b6e68e6f2e}{IReporter}}(\ \mbox{\hyperlink{classReporterAccess}{ReporterAccess}}\ \&\ )}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ :}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}}(0),}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}(),}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}()}
\DoxyCodeLine{00134\ \ \ \ \ \{}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classIReporter_a73657c8a169a89c3fcc12e27d08b8783_a73657c8a169a89c3fcc12e27d08b8783}{\string~IReporter}}()\ noexcept\ =\ 0;}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classIReporter_aa86f1962c6830b3a20c94c17f2cf34e2_aa86f1962c6830b3a20c94c17f2cf34e2}{hasListener}}(\ \mbox{\hyperlink{classIListener}{IListener}}<T>\ *listener\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00141\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::find(\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.begin(),\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ listener\ )\ )\ !=\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end()}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ ||\ std::find(\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.begin(),\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ listener\ )\ )\ !=\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end();}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_a6525b196ee174f7c0b3f583da9f0492c_a6525b196ee174f7c0b3f583da9f0492c}{addListener}}(\ \mbox{\hyperlink{classIListener}{IListener<T>}}\ *listener\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00147\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ result\ =\ \mbox{\hyperlink{classIReporter_a126e81114a8b775b3e7c66aa86592edb_a126e81114a8b775b3e7c66aa86592edb}{tryAddListener}}(\ listener\ );}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assertions__console_8h_af3e11288cb5021b91949be5058816137_af3e11288cb5021b91949be5058816137}{ASSERT}}(\ result,\ \textcolor{stringliteral}{"{}Attempting\ to\ add\ an\ object\ as\ a\ listener\ that\ is\ already\ in\ the\ listeners\ list!"{}}\ );}
\DoxyCodeLine{00150\ \ \ \ \ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_a1e48a61d8ea294e895bc58d43516c700_a1e48a61d8ea294e895bc58d43516c700}{removeListener}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classIListener}{IListener<T>}}\ *listener\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00154\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ mark\ for\ removal\ at\ next\ \`{}notifyListeners`\ call}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ std::find(\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.begin(),\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ listener\ )\ );}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ it\ !=\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end()\ )}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ *it\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ from\ pending\ list}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.erase(\ std::remove(\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.begin(),\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ listener\ )\ ),\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end()\ );}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ ourselves\ from\ the\ listener's\ reporter\ list}}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.erase(\ std::remove(\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.begin(),\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ \textcolor{keyword}{this}\ )\ ),\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end()\ );}
\DoxyCodeLine{00167\ \ \ \ \ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_ac8104201bb71f8748952e39a13e1043e_ac8104201bb71f8748952e39a13e1043e}{notifyListeners}}(\ \textcolor{keyword}{const}\ T\ \&obj\ )}
\DoxyCodeLine{00170\ \ \ \ \ \{}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#if\ !defined(\ FINAL\_RELEASE\ )}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ bReentrancyCheck\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assertions__console_8h_af3e11288cb5021b91949be5058816137_af3e11288cb5021b91949be5058816137}{ASSERT}}(\ bReentrancyCheck\ ==\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}Detected\ possible\ reentrancy\ in\ IReporter::notifyListeners\ -\/\ this\ may\ lead\ to\ a\ crash."{}}\ );}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ bReentrancyCheck\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}}\ ==\ 0\ )}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ it's\ safe\ to\ process\ pending\ adds\ at\ this\ point}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.insert(\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end(),\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.begin(),\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end()\ );}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.clear();}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}};}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ std::vector<void*>::iterator\ it\ =\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.begin();\ it\ !=\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end();\ ++it\ )}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIListener}{IListener<T>}}\ *listener\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classIListener}{IListener<T>}}*\textcolor{keyword}{>}(\ *it\ );}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ listener\ ==\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ listener-\/>\mbox{\hyperlink{classIListener_a75b1652418e98a4d0f6db2c61addae8d_a75b1652418e98a4d0f6db2c61addae8d}{notify}}(\ obj\ );}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}};}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ \mbox{\hyperlink{classIReporter_ad77afbe023f9088b01dea619c9bd9d19_ad77afbe023f9088b01dea619c9bd9d19}{m\_notifyCounter}}\ ==\ 0\ )}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ invalids}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.erase(\ std::remove(\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.begin(),\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end(),\ \textcolor{keyword}{nullptr}\ ),\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end()\ );}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#if\ !defined(\ FINAL\_RELEASE\ )}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ bReentrancyCheck\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_acb5055f18fc9be9d150dbe6f3514e778_acb5055f18fc9be9d150dbe6f3514e778}{notifyListeners}}(\ T\ \&\&reporter\ )}
\DoxyCodeLine{00210\ \ \ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_ac8104201bb71f8748952e39a13e1043e_ac8104201bb71f8748952e39a13e1043e}{notifyListeners}}(\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }T\&\textcolor{keyword}{>}(\ reporter\ )\ );}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_afee97efe68b72d86958d6075edd29427_afee97efe68b72d86958d6075edd29427}{notifyListeners}}(\ TArgs\ \&\&...args\ )}
\DoxyCodeLine{00216\ \ \ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_ac8104201bb71f8748952e39a13e1043e_ac8104201bb71f8748952e39a13e1043e}{notifyListeners}}(\ T(\ std::forward<TArgs>(\ args\ )...\ )\ );}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classIReporter_a20ff25f7f6d46d778d2197ebf2a7062f_a20ff25f7f6d46d778d2197ebf2a7062f}{anyListenersPresent}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00221\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.empty()\ ||\ !\mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.empty();}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classIReporter_a808f4be43a1a2774b7fdf2091718d179_a808f4be43a1a2774b7fdf2091718d179}{numListeners}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00226\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.size()\ +\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.size();}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classIReporter_a2f468eee19811b61d1367363f9e34c6b_a2f468eee19811b61d1367363f9e34c6b}{removeThisFromListenersList}}()}
\DoxyCodeLine{00231\ \ \ \ \ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ std::vector<void*>::iterator\ it\ =\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.begin();\ it\ !=\ \mbox{\hyperlink{classIReporter_a0a32cf9b1242701c050f1d61b57e24e3_a0a32cf9b1242701c050f1d61b57e24e3}{m\_listeners}}.end();\ ++it\ )}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIListener}{IListener<T>}}\ *listener\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classIListener}{IListener<T>}}*\textcolor{keyword}{>}(\ *it\ );}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ listener\ !=\ \textcolor{keyword}{nullptr}\ )}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.erase(\ std::remove(\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.begin(),\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ \textcolor{keyword}{this}\ )\ ),\ listener-\/>\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end()\ );}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ std::vector<void*>::iterator\ it\ =\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.begin();\ it\ !=\ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.end();\ ++it\ )}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIListener}{IListener<T>}}\ \&listener\ =\ *\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classIListener}{IListener<T>}}*\textcolor{keyword}{>}(\ *it\ );}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ listener.\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.erase(\ std::remove(\ listener.\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.begin(),\ listener.\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end(),\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ \textcolor{keyword}{this}\ )\ ),\ listener.\mbox{\hyperlink{classIListener_aaaf1ddfe2afeedab8a70c935b1626488_aaaf1ddfe2afeedab8a70c935b1626488}{m\_reporters}}.end()\ );}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classIReporter_a126e81114a8b775b3e7c66aa86592edb_a126e81114a8b775b3e7c66aa86592edb}{tryAddListener}}(\ \mbox{\hyperlink{classIListener}{IListener<T>}}\ *listener\ )\textcolor{keyword}{\ const}}
\DoxyCodeLine{00249\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ for\ repeated\ entries\ here\ (and\ not\ in\ IReporter::addReporter)}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !\mbox{\hyperlink{classIReporter_aa86f1962c6830b3a20c94c17f2cf34e2_aa86f1962c6830b3a20c94c17f2cf34e2}{hasListener}}(\ listener\ )\ )}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classIReporter_a9f0ba8c768eeb5b0f466a64c1a18c562_a9f0ba8c768eeb5b0f466a64c1a18c562}{m\_listenersPendingAdd}}.push\_back(\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\ listener\ )\ );}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ listener-\/>\mbox{\hyperlink{classIListener_a6b5c32b4da4ac2a5c5145bc573bb22a7_a6b5c32b4da4ac2a5c5145bc573bb22a7}{addReporter}}(\ \textcolor{keyword}{this}\ );}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ \};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00263\ \mbox{\hyperlink{classIReporter_a73657c8a169a89c3fcc12e27d08b8783_a73657c8a169a89c3fcc12e27d08b8783}{IReporter<T>::\string~IReporter}}()\ noexcept}
\DoxyCodeLine{00264\ \{}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \}}

\end{DoxyCode}
